<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>child</title>
</head>

<body>
    <div id="child" onclick="sendParent()">
        child
    </div>
    <script>
        window.name = 'child';
        console.log(window.name);
        var channel = new window.BroadcastChannel('channel');
        channel.addEventListener('message', (res) => {
            if (!res.data) return;
            console.log(res.data, 777);
        });

        function sendParent() {
            postmsg()
        }

        function postmsg() {
            const ifr = document.createElement('iframe');
            // 对方域名的暴露地址
            ifr.src = "http://192.168.1.105:8112/.index.html?name=iframeHandle";
            ifr.style.display = 'none';
            document.body.appendChild(ifr);
            ifr.onload = function () {
                ifr.contentWindow.postMessage('fuqin', 'http://192.168.1.105:8112');
                setTimeout(() => {
                    document.body.removeChild(ifr);
                }, 1000)
            }

        }
    </script>
</body>

</html>